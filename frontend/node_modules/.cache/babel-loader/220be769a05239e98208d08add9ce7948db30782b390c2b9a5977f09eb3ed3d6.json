{"ast":null,"code":"// src/components/Projects/ProjectForm.js\nimport React,{useState,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import{createProject,getProjectById,updateProject}from'../../services/projectService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProjectForm=()=>{const[formData,setFormData]=useState({name:'',description:'',startDate:'',endDate:'',location:'',status:'Not Started',progress:0,funds:0,agency:localStorage.getItem('agencyId')||''// Obtener el ID de la agencia del almacenamiento local\n});const[errorMessage,setErrorMessage]=useState('');const navigate=useNavigate();const{id}=useParams();useEffect(()=>{if(id){const fetchProject=async()=>{try{const response=await getProjectById(id);setFormData(response);}catch(error){console.error('Error fetching project:',error);setErrorMessage('Error fetching project details');}};fetchProject();}},[id]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{const token=localStorage.getItem('token');// Obtén el token del almacenamiento local\nconst config={headers:{'Authorization':`Bearer ${token}`}// Asegúrate de enviar el token correctamente\n};if(id){await updateProject(id,formData,config);}else{await createProject(formData,config);}navigate('/dashboard/projects');}catch(error){var _error$response,_error$response$data;setErrorMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.msg)||'An error occurred while saving the project.');console.error('Error saving project:',error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:id?'Edit Project':'Create Project'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"description\",value:formData.description,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",value:formData.startDate,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"endDate\",value:formData.endDate,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Location:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",value:formData.location,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:formData.status,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Not Started\",children:\"Not Started\"}),/*#__PURE__*/_jsx(\"option\",{value:\"In Progress\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Completed\",children:\"Completed\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Progress:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"progress\",value:formData.progress,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Funds:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"funds\",value:formData.funds,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:id?'Update Project':'Create Project'})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:errorMessage})]});};export default ProjectForm;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","createProject","getProjectById","updateProject","jsx","_jsx","jsxs","_jsxs","ProjectForm","formData","setFormData","name","description","startDate","endDate","location","status","progress","funds","agency","localStorage","getItem","errorMessage","setErrorMessage","navigate","id","fetchProject","response","error","console","handleChange","e","target","value","handleSubmit","preventDefault","token","config","headers","_error$response","_error$response$data","data","msg","children","onSubmit","type","onChange","required","style","color"],"sources":["C:/Local4Global/frontend/src/components/Projects/ProjectForm.js"],"sourcesContent":["// src/components/Projects/ProjectForm.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { createProject, getProjectById, updateProject } from '../../services/projectService';\r\n\r\nconst ProjectForm = () => {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    startDate: '',\r\n    endDate: '',\r\n    location: '',\r\n    status: 'Not Started',\r\n    progress: 0,\r\n    funds: 0,\r\n    agency: localStorage.getItem('agencyId') || '', // Obtener el ID de la agencia del almacenamiento local\r\n  });\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      const fetchProject = async () => {\r\n        try {\r\n          const response = await getProjectById(id);\r\n          setFormData(response);\r\n        } catch (error) {\r\n          console.error('Error fetching project:', error);\r\n          setErrorMessage('Error fetching project details');\r\n        }\r\n      };\r\n\r\n      fetchProject();\r\n    }\r\n  }, [id]);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const token = localStorage.getItem('token'); // Obtén el token del almacenamiento local\r\n      const config = {\r\n        headers: { 'Authorization': `Bearer ${token}` } // Asegúrate de enviar el token correctamente\r\n      };\r\n      if (id) {\r\n        await updateProject(id, formData, config);\r\n      } else {\r\n        await createProject(formData, config);\r\n      }\r\n      navigate('/dashboard/projects');\r\n    } catch (error) {\r\n      setErrorMessage(error.response?.data?.msg || 'An error occurred while saving the project.');\r\n      console.error('Error saving project:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>{id ? 'Edit Project' : 'Create Project'}</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          <label>Name:</label>\r\n          <input type=\"text\" name=\"name\" value={formData.name} onChange={handleChange} required />\r\n        </div>\r\n        <div>\r\n          <label>Description:</label>\r\n          <input type=\"text\" name=\"description\" value={formData.description} onChange={handleChange} required />\r\n        </div>\r\n        <div>\r\n          <label>Start Date:</label>\r\n          <input type=\"date\" name=\"startDate\" value={formData.startDate} onChange={handleChange} required />\r\n        </div>\r\n        <div>\r\n          <label>End Date:</label>\r\n          <input type=\"date\" name=\"endDate\" value={formData.endDate} onChange={handleChange} required />\r\n        </div>\r\n        <div>\r\n          <label>Location:</label>\r\n          <input type=\"text\" name=\"location\" value={formData.location} onChange={handleChange} required />\r\n        </div>\r\n        <div>\r\n          <label>Status:</label>\r\n          <select name=\"status\" value={formData.status} onChange={handleChange} required>\r\n            <option value=\"Not Started\">Not Started</option>\r\n            <option value=\"In Progress\">In Progress</option>\r\n            <option value=\"Completed\">Completed</option>\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label>Progress:</label>\r\n          <input type=\"number\" name=\"progress\" value={formData.progress} onChange={handleChange} required />\r\n        </div>\r\n        <div>\r\n          <label>Funds:</label>\r\n          <input type=\"number\" name=\"funds\" value={formData.funds} onChange={handleChange} required />\r\n        </div>\r\n        <button type=\"submit\">{id ? 'Update Project' : 'Create Project'}</button>\r\n      </form>\r\n      {errorMessage && <p style={{ color: 'red' }}>{errorMessage}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}